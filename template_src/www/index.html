<!DOCTYPE html>

<html>

<head>

    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">

    <link rel="stylesheet" type="text/css" href="css/index.css">


    <link rel="stylesheet" href="./lib/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="./lib/onsenui/css/onsen-css-components.min.css">


    <script src="./lib/onsenui/js/onsenui.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <title>COVID-19 Tracker</title>
</head>

<body>

<ons-navigator id="myNavigator" page="first"> </ons-navigator> 


<template id="first">
        <ons-page id="first">
             
                    <div class="onboard-container">
                        <img class="onboard-svg" src="img/mask-girl.svg">
                        <h1>Welcome to <br>COVID-19 Tracker</h1>
                        <p class="onboard-text">Track the global pandemic in real time.</p>
                        <ons-button class="button push-button" onclick="pushButton()">Continue</ons-button></ons-button>
                    </div>
           </ons-page>
</template>

<template id="second">
        <ons-page id="second">
            <div class="onboard-container">
                
                <img class="onboard-svg learn-svg" src="img/doctor.svg">
                        <h1>Learn</h1>
                        <p class="onboard-text">Discover ways you can prevent infection and stop the spread.</p>
            <ons-button class="button push-button" onclick="pushButton2()">Next</ons-button>
        </div>
</ons-page>
</template>

<template id="third">
        <ons-page id="third">
                    <div class="onboard-container">
                         <img class="onboard-svg " src="img/world.svg">
                        <h1>Track</h1>
                        <p class="onboard-text">View current recovered and deaths for your home country.</p>

            <ons-button class="button push-button" onclick="pushButton3()">Sign up now</ons-button>
        </div>
</ons-page>
</template>

   <!-- SIGNUP PAGE -->

        <template id="template-signup">
            <ons-page id="page-signup">
                <ons-toolbar>
                    <div class="left"><ons-back-button>Back</ons-back-button></div>
                    <div class="center"></div>
                </ons-toolbar>
                 <ons-card>
                
                    <div class="content">
                        <h1 id="create-account">Create an account</h1>

                        <div class="input-signup">
                            <label for="firstName">First name</label>
                            <div><ons-input input-id="firstName" class="form-field-full" modifier="underbar" placeholder="Enter first name"></ons-input></div>
                        </div>

                        <div class="input-signup">
                             <label for="lastName">Last name</label>
                            <div><ons-input input-id="lastName" class="form-field-full" modifier="underbar" placeholder="Enter last name"></ons-input></div>
                        </div>

                        <div class="input-signup">
                            <label for="email">Email Address</label>
                            <div><ons-input input-id="email" class="form-field-full" modifier="underbar" placeholder="Enter email"></ons-input></div>
                        </div>

                        <div class="input-signup">
                            <label for="email">Password</label>
                            <div><ons-input input-id="email" class="form-field-full" modifier="underbar" placeholder="Enter password"></ons-input></div>
                        </div>
                       
                <!-- SUBMIT -->

                         <ons-checkbox input-id="agreeTerms" onchange="toggleSubmit(this)"></ons-checkbox>
                        <label for="agreeTerms" class="center agreeTerms">
                            I agree to the terms of service
                        </label>
                    
                        <div  class="submit-button">
                        <ons-button class="btn-primary" id="submitBtn" disabled onclick="submitBooking()">
                            Submit
                        </ons-button>

                        <a id="skipSignup" onclick="pushButtonDash()">Skip</a>

                    </div>
                        
                    </div>
                </ons-card>


            </ons-page>
        </template>

         <!-- ===================== Dialog Confirmation ===================== -->
        
        <template id="booking-confirm-template" class="dialogue-card">
            <ons-dialog id="booking-dialog" >
              <div style="text-align: center; padding: 10px;">
                <h3>
                  Thank you, <span id="firstName"></span>!
                </h3>

                <p style="text-transform: none;">
                    Your account has been created.
                </p>

                   <ons-button class="button push-button" onclick="pushButtonDash()">Continue</ons-button>
                </p>
              </div>
            </ons-dialog>
        </template>


           <!-- SPINNER FOR FORM ENTRY -->        
        <ons-modal id="spinner-modal">
            <div style="margin: auto;">
                <ons-icon icon="md-spinner" size="70px" spin></ons-icon>              
            </div>
        </ons-modal>

<template id="tabbar-template">
        <ons-page id="tabbar-page">
    <ons-tabbar swipeable position="bottom">
        <ons-tab page="first-template" label="Home" icon="md-home" active>
        </ons-tab>
        <ons-tab page="prevention-template" label="Prevention" icon="md-face">
        </ons-tab>
        <ons-tab page="list-template" label="List" icon="md-book">
        </ons-tab>
        <ons-tab page="pref-template" label="Preferences" icon="md-settings">
        </ons-tab>
    </ons-tabbar>
</ons-page>
</template>

    <template id="first-template">
        <ons-page id="first-page">
                <div class="content content-container">
                   
                    <div span id="titletext">Dashboard</div>
                  
                        <div class="country-top">
                            <i class="fas fa-flag" style="color:#fff;"></i>
                            <div span id="msgSpace">Country</div>
                            <a href="#" class="refresh-btn"onclick="checkPref()">
                                <i class="fas fa-sync-alt"  style="color:#fff; padding-right: 10px;"></i>
                                
                                <i class="fas fa-exclamation-circle" style="color:#FF2D6A;" ></i>
                                
                            </a>
                            
                            
                        </div>
                        <!-- <div class="btn-space" style="margin-top:25px; display: flex;  margin: auto;
                        width: 50%; margin-top: 20px;">
                            <ons-button class="btn-link" onclick="checkPref()">Update Results</ons-button>
                        </div> -->
              
                    <div class="container">
                        
                        <!-- <h1 id="msgSpace">Todo List</h1> -->
                
                        <div class="todo__container">
                
                
                
                
                            <div class="todosec1 todo--finished">
                                <i class="fas fa-user-friends" style="color:#892DFE; font-size: 20px;"></i>
                                <p class="todo__link">Total Cases</p>
                                <h2 class="todo__amount content" id="home-totalConfirmed">0</h2>
                                
                            </div>

                            <div class="todosec todo--finished">
                                <i class="fas fa-skull" style="color:#37EC8F; font-size: 20px;"></i>
                                <p class="todo__link">Total Deaths</p>
                                <h2 class="todo__amount" id="home-totalDeaths">0</h2>
                                
                            </div>

                            <div class="todosec1 todo--finished">
                                <i class="fas fa-ambulance" style="color:#3D85FE; font-size: 20px;"></i>
                                <p class="todo__link">New Deaths</p>
                                <h2 class="todo__amount" id="home-newDeaths">0</h2>
                                
                            </div>

                            <div class="todosec todo--finished">
                                <i class="fas fa-temperature-high" style="color:#FF545A; font-size: 20px;"></i>
                                <p class="todo__link">New Confirmed</p>
                                <h2 class="todo__amount" id="home-newConfirmed">0</h2>
                                
                            </div>

                            <div class="todomain todo--finished">
                                <i class="fas fa-user-nurse" style="color:#FFf; font-size: 26px;"></i>
                                <h2 class="todo__amountc"id="home-totalRecovered" >0</h2>
                                <p class="todo__linkc"> Total <br>Recovered</p>
                            </div>
                            <div class="todomain2 todo--finished">
                                <i class="fas fa-hospital" style="color:#FFf; font-size: 26px;"></i>
                                <h2 class="todo__amountc"id="home-newRecovered" >0</h2>
                                <p class="todo__linkc"> New <br>Recovered</p>
                            </div>
                            <!-- <div class="todomain todo--finished">
                                <h2 class="todo__amount"id="home-date" >0</h2>
                                <p class="todo__link">New Recovered</p>
                            </div> -->
                            
                            
                        </div>
                        
                
                    </div>
                   
    

                    <!-- <div class="center desc-card" style="padding-left: 10%;">
                        <table>
                        <tr> 
                             <td class="table-hd">Total Confirmed: </td>
                             <td>
                            <p class="content" id="home-totalConfirmed"></p>
                            </td>
                        </tr>
                        <tr>
                             <td class="table-hd">Total Deaths: </td>
                             <td>
                            <p class="content" id="home-totalDeaths"></p>
                            </td>
                            </tr>
                        <tr>
                             <td class="table-hd">Total Recovered: </td>
                             <td>
                            <p class="content" id="home-totalRecovered"></p>
                            </td>
                            </tr>
                        <tr>
                             <td class="table-hd">New Confirmed: </td>
                             <td>
                            <p class="content" id="home-newConfirmed"></p>
                            </td>
                            </tr>
                       <tr>
                         <td class="table-hd">New Deaths: </td>
                         <td>
                        <p class="content" id="home-newDeaths"></p>
                        </td>
                        </tr>
                       <tr>
                         <td class="table-hd">New Recovered: </td>
                         <td>
                        <p class="content" id="home-newRecovered"></p>
                        </td>
                        </tr>
                        <tr>
                             <td>
                            <p class="content"  id="home-date"></p>
                            </td>
                        </tr>
                        </table>
                    </div> -->

                
                </div>

                

        </ons-page>
    </template>

    <!--  PREVENTION TEMPLATE  -->
    <template id="prevention-template">
        <ons-page id="first-page">
                <div class="content content-container">
                        <h1> COVID-19 Prevention </h1>
                        <div class="prevention-card"> 
                            <table>
                                <tr class="prevention-row">
                                <td> <h2>Wear a mask </h2><span class="prevention-text">Wear a cloth face mask in public to protect others and yourself.</span></td>
                                <td> <img class="covid-svg" src="img/mask-girl.svg"></td>
                            </tr>
                                 <tr>
                                <td> <img class="covid-svg" src="img/wash.svg"></td>
                                <td> <h2>Wash your hands</h2><span class="prevention-text">Wash your hands often or use hand sanitizer.</span></td>
                            </tr>
                             <tr>
                                <td> <h2>Distance yourself</h2><span class="prevention-text"> Keep 2m distance from others when in public.</span></td>
                                <td> <img class="covid-svg" src="img/distance.svg"></td>
                            </tr>
                             <tr>
                                <td> <img class="covid-svg" src="img/keep-track.svg"></td>
                                <td> <h2>Keep track</h2><span class="prevention-text">Make a list of the people you contact and notify them if you contract COVID-19.</span></td>
                            </tr>
                            <tr>
                                <td> <h2>Stay home</h2><span class="prevention-text"> Avoid leaving the house when you can, and stay home if you feel sick. </span></td>
                                <td> <img class="covid-svg" src="img/home.svg"></td>
                            </tr>
                             <tr>
                                <td> <img class="covid-svg" src="img/doctor.svg"></td>
                                <td> <h2>Get tested</h2><span class="prevention-text">Contact a medical professional for a COVID-19 test if experiencing symptoms.</span></td>
                            </tr>
                            </table>
                        </div>
                </div>
        </ons-page>
    </template>

    <!-- PREFERENCES  -->

          

    <template id="pref-template">
        <ons-page id="pref-page">
                
            <div class="content content-container pref-container">
                <h1>Preferences</h1>

                <div class="form-group">
                    <label for="country">Type a Country</label>
                    <div><ons-input input-id="country" class="form-field-full" placeholder="Enter country name" modifier="underbar"></ons-input></div>
                </div>

                

                <div class="btn-space">
                    <ons-button class="btn-link" onclick="savePref()">UPDATE</ons-button>
                    <ons-button class="btn-link" onclick="clearPref()">CLEAR</ons-button>
                </div>
            </div>

        </ons-page>
    </template>

 

    <template id="list-template">

        <ons-page id="list">
            

            <div style="margin-top: 5px; width: 100%; display: flex; justify-content: center;" class="center">

        
                   <!-- MODAL -->
              <ons-modal  direction="up">
            <div class="modal-container">
                <p class="content" id="countryName"></p>
                <p class="content" id="totalConfirmed"></p>                 
                <p class="content" id="totalDeaths"></p>                  
                <p class="content" id="totalRecovered"></p>                  
                <p class="content" id="newConfirmed"></p>                  
                <p class="content" id="newDeaths"></p>               
                <p class="content" id="newRecovered"></p>              
                <p class="content" style="position:absolute; bottom: 20px;" id="date"></p>  
                <div style="text-align: center">                  
                  <button onclick="hideModal();" icon="md-close" class="btn-primary">Close</button>
                </div>
            </div>
              </ons-modal>            


            </div>
            </ons-toolbar>
            <ons-list id="web-list-node">
            </ons-list>


        </ons-page>
    </template>

    <ons-modal id="spinner-modal">
        <div style="margin: auto;">
            <ons-icon icon="md-spinner" size="100px" spin></ons-icon>
        </div>
    </ons-modal>

        



    <script type="text/javascript" src="js/signup.js"></script>
    <script type="text/javascript" src="js/listModal.js"></script>
    <script type="text/javascript" src="js/covid-id.js"></script>
    <script type="text/javascript" src="js/userPref.js"></script>
    <script type="text/javascript" src="js/covid.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="cordova.js"></script>

    <script>
        // since we are using tabs we can just set the home button universally


        document.addEventListener('init', function(event) {
            // get a reference to the element (page that fired the init event)
            var page = event.target;

            if (page.id === 'pref-page') {
                setPrefFields();
            }

        });

        function checkPref() {

            var firstPage = document.getElementById('first-page');
            var currPref = window.localStorage.getItem('userPref');




            if (currPref !== null) {
                var selectCountry = JSON.parse(currPref).country;
                firstPage.querySelector('#msgSpace').innerHTML = selectCountry;
                getpref(selectCountry);
            } else {
                firstPage.querySelector('#msgSpace').innerHTML = "No preferences in LocalStorage";
                document.querySelector(
                    "#home-totalConfirmed"
                ).innerHTML = "";
                document.querySelector("#home-totalDeaths").innerHTML = "";
                document.querySelector(
                    "#home-totalRecovered"
                ).innerHTML = "";
                document.querySelector(
                    "#home-newConfirmed"
                ).innerHTML = "";
                document.querySelector("#home-newDeaths").innerHTML = "";
                document.querySelector(
                    "#home-newRecovered"
                ).innerHTML = "";
                document.querySelector("#home-date").innerHTML = "";
            }
        }

        function savePref() {
            var prefPage = document.getElementById('pref-page');

            var currPref = {
                country: prefPage.querySelector('#country').value
            };

            // iterate over interests
            var interestSwitches = prefPage.querySelectorAll('.int-switch');
            for (let i = 0; i < interestSwitches.length; i++) {

                currPref.interests.push({
                    fieldId: interestSwitches[i].getAttribute('input-id'),
                    fieldVal: interestSwitches[i].checked
                });
            }

            window.localStorage.setItem('userPref', JSON.stringify(currPref));
        }

        function clearPref() {
            window.localStorage.removeItem('userPref');
        }

        function setPrefFields() {
            // get the stored values if they exist                
            var currPrefObj = window.localStorage.getItem('userPref');

            if (currPrefObj !== null) {
                // since we want them as an object we will parse
                currPrefObj = JSON.parse(currPrefObj);

                var prefPage = document.getElementById('pref-page');

                // normally we'd set defaults for null values here but we'll keep it simple
                prefPage.querySelector('#country').value = currPrefObj.country;


                // for (let i = 0; i < currPrefObj.interests.length; i++) {
                //     prefPage.querySelector('#' + currPrefObj.interests[i].fieldId).checked =
                //         currPrefObj.interests[i].fieldVal;
                // }

            }
        }
    </script>
</body>

</html>